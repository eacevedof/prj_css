<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data</title>
</head>
<body>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
</style>
<div id="div-result"></div>
<section style="border: 1px dashed deepskyblue">
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non turpis orci. Nullam aliquam, nibh at placerat fringilla, purus purus bibendum lectus, ac auctor quam nulla non justo. Etiam quis molestie nulla. Nulla sed neque nec lacus volutpat euismod. Fusce id rhoncus neque, in venenatis ligula. Cras nisl urna, molestie at nibh eu, aliquam ultrices massa. Nulla tortor ante, convallis at purus sit amet, accumsan venenatis ligula. Maecenas malesuada iaculis erat, vitae rhoncus eros. Pellentesque volutpat vel ante eu pulvinar.
  </p>
  <p>
    Praesent pulvinar gravida nisi, sed rutrum elit. Donec sollicitudin vehicula urna vel tincidunt. Morbi gravida diam in diam pharetra, non egestas odio dictum. Aenean tempus velit et mauris imperdiet porttitor. Nulla ultricies enim tortor, ac rutrum nulla dignissim eu. Vestibulum sit amet dolor luctus turpis gravida condimentum ac quis mauris. In hac habitasse platea dictumst.
  </p>
  <p>
    Nunc facilisis velit eget fermentum gravida. Phasellus pellentesque nisl ac viverra aliquet. Nunc volutpat fermentum ipsum mollis congue. Cras lacinia sit amet massa sollicitudin eleifend. Nam eu massa non lacus molestie pharetra et non turpis. Integer id urna hendrerit ipsum scelerisque tincidunt. Nunc et sem non nulla feugiat pellentesque eget vel nunc. Praesent faucibus molestie turpis ut feugiat. Proin non erat mollis, vestibulum mi et, bibendum magna. Donec aliquam quam at eros vestibulum lobortis. Pellentesque accumsan mi vel dolor elementum, vel laoreet sem convallis. Proin velit lectus, dapibus varius metus nec, luctus dapibus libero. Vestibulum fringilla neque vel bibendum rutrum. Etiam mollis porta neque et pharetra. Integer eleifend dapibus tortor venenatis venenatis.
  </p>
  <p>
    Donec iaculis arcu in augue bibendum iaculis. In maximus lobortis diam, nec consectetur ex convallis consequat. Mauris mattis, sapien id efficitur ultricies, neque nisi volutpat lectus, ut tincidunt eros metus in tortor. Sed ac sollicitudin tellus. Nulla molestie, metus sed dignissim elementum, ante massa lobortis leo, a placerat nisl nibh quis ex. Etiam sit amet neque dui. Vestibulum sit amet erat eu justo malesuada pulvinar at vel dolor. Quisque id tincidunt neque, at egestas enim. Aenean bibendum ac ante eu maximus. Cras eleifend nibh nulla, id volutpat risus pulvinar ac. Aenean accumsan efficitur sagittis. Aenean vel leo blandit, elementum libero sed, rutrum magna. Phasellus dignissim lectus a vulputate commodo. Donec semper et purus et mollis. Quisque ut dictum mi.
  </p>
  <p>
    Vestibulum ut accumsan diam. Praesent in laoreet dolor, vel pretium leo. Maecenas nec molestie mauris, eu volutpat sapien. Pellentesque tempor, turpis sed venenatis feugiat, purus sem aliquet sem, non luctus urna ex eu sapien. Vivamus dignissim turpis id orci congue, vel consequat leo cursus. Donec nisl mauris, pulvinar vitae lacus ac, varius malesuada est. Donec lacinia risus quis faucibus pellentesque. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
  </p>
  <p>
    Vestibulum ut accumsan diam. Praesent in laoreet dolor, vel pretium leo. Maecenas nec molestie mauris, eu volutpat sapien.
  </p>
</section>
<script type="module">
const rem = 16
const $body = document.querySelector("body")
const $div = document.getElementById("div-result")
document.addEventListener("DOMContentLoaded", reportWindowSize)
window.addEventListener("resize", reportWindowSize)
window.addEventListener("scroll", reportWindowSize)

function reportWindowSize() {
  const tpl = `
  <ul>
    <li>screen.height: ${screen.height} - ${screen.height/rem}rem</li>
    <li>screen.availHeight: ${screen.availHeight} - ${screen.availHeight/rem}rem</li>
    <li>screen.width: ${screen.width} - ${screen.width/rem}rem</li>
    <li>screen.availWidth: ${screen.availWidth} - ${screen.availWidth/rem}rem</li>
    <li>-</li>
    <li>window.innerHeight: ${window.innerHeight} - ${window.innerHeight/rem}rem</li>
    <li>window.innerWidth: ${window.innerWidth} - ${window.innerWidth/rem}rem</li>
    <li>window.outerHeight: ${window.outerHeight} - ${window.outerHeight/rem}rem</li>
    <li>window.outerWidth: ${window.outerWidth} - ${window.outerWidth/rem}rem</li>
    <li>-</li>
    <li>document.body.scrollHeight: ${document.body.scrollHeight} - ${document.body.scrollHeight/rem}rem</li>
    <li>document.body.clientHeight: ${document.body.clientHeight} - ${document.body.clientHeight/rem}rem</li>
    <li>document.body.offsetHeight: ${document.body.offsetHeight} - ${document.body.offsetHeight/rem}rem</li>
    <li>-</li>
    <li>document.documentElement.scrollTop: ${document.documentElement.scrollTop} - ${document.documentElement.scrollTop/rem}rem</li>
    <li>-</li>
    <li>(si r<0 => hay scroll) window.innerHeight - document.body.scrollHeight: ${window.innerHeight - document.body.scrollHeight}</li>
    <li>body scroll => (window.innerHeight + 1) < $body.scrollHeight: ${(window.innerHeight + 1) < $body.scrollHeight}</li>
    <li>(si r.ceil = body.scrollHeight => fin de pag) window.innerHeight + window.scrollY: ${window.innerHeight + window.scrollY}  (${Math.ceil(window.innerHeight + window.scrollY)})</li>
    <li>is_scroll: ${is_scroll()}</li>
    <li>is_bottom: ${is_bottom()}</li>
  </ul>
  `
  if ($div) $div.innerHTML = tpl
  eaf()
}
function eaf() {
  console.log(
    `screen.height: ${screen.height}\n`,
    `screen.availHeight: ${screen.availHeight}\n`,
    `screen.width: ${screen.width}\n`,
    `screen.availWidth: ${screen.availWidth}\n`,
    `\n`,
    `window.innerHeight: ${window.innerHeight} \n`,
    `window.innerWidth: ${window.innerWidth} \n`,
    `window.outerHeight: ${window.outerHeight} \n`,
    `window.outerWidth: ${window.outerWidth} \n`,
    `window.scrollY: ${window.scrollY} \n`,
    `\n`,
    `document.documentElement.scrollTop: ${document.documentElement.scrollTop} \n`,
    `document.documentElement.scrollHeight: ${document.documentElement.scrollHeight} \n`,
    `document.documentElement.clientHeight: ${document.documentElement.clientHeight} \n`,
    `\n`,
    `document.body.scrollHeight: ${document.body.scrollHeight}\n`,
    `document.body.clientHeight: ${document.body.clientHeight}\n`,
    `document.body.offsetHeight: ${document.body.offsetHeight}\n`,
    //`\n`,
    //`(si r<0 => hay scroll) window.innerHeight - document.body.scrollHeight: ${window.innerHeight - document.body.scrollHeight} \n`,
    //`body scroll => (window.innerHeight + 1) < $body.scrollHeight: ${(window.innerHeight + 1) < $body.scrollHeight} \n`,
    //`(si r.ceil >= body.scrollHeight => fin de pag) window.innerHeight + window.scrollY: ${window.innerHeight + window.scrollY} (${Math.ceil(window.innerHeight + window.scrollY)})\n`,
    `\n`,
    `is_scroll: ${is_scroll()} \n`,
    `is_bottom: ${is_bottom()} \n`
  )
}
const y = {
  top: isNaN(parseInt($body.style?.paddingTop?.replace("px",""))) ? 0 : parseInt($body.style?.paddingTop?.replace("px","")),
  bottom: isNaN(parseInt($body.style?.paddingBottom?.replace("px",""))) ? 0 : parseInt($body.style?.paddingBottom?.replace("px","")),
}

function is_scroll() {
  console.log("y", y)
  //return ((window.innerHeight) - (document.body.scrollHeight + y.top + y.bottom)) < 0

  //return ((document.body.clientHeight) < (document.body.scrollHeight))
  return ((document.body.clientHeight) < (document.body.scrollHeight + y.top + y.bottom))
}

function is_bottom() {
  //tamaÃ±o visible de la ventana + el desplazamiento = el limite permitido por body
  //return (Math.ceil(window.innerHeight + window.scrollY) >= (document.body.scrollHeight + y.top + y.bottom))
  return (document.body.clientHeight + document.documentElement.scrollTop >= (document.body.scrollHeight))
  return ((document.body.clientHeight) < (document.body.scrollHeight + y.top + y.bottom))
}

//en la app interna es el <body> quien tiene el scroll
</script>
</body>
</html>